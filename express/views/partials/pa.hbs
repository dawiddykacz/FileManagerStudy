<div class="wrapper wrapper-center white-space-pre-line">
    <h1>Podgląd: {{name}} Wersja {{version}} Właściciel {{ownerName}}</h1>

   {{!-- Obraz --}}
  {{#if (startsWith contentType "image/")}}
    <img width="100%" src="{{url}}" alt="{{name}}">

  {{!-- PDF --}}
  {{else if (eq contentType "application/pdf")}}
    <iframe src="{{url}}" width="100%" height="800px"></iframe>

  {{!-- Tekst, CSV, JSON --}}
  {{else if (or (startsWith contentType "text/") (includes contentType "json") (includes contentType "csv"))}}
    <pre width="100%" id="textPreview{{version}}">Wczytywanie...</pre>
    <script>
      fetch('{{{url}}}', { mode: 'cors' })
        .then(res => res.text())
        .then(text => document.getElementById('textPreview{{version}}').textContent = text)
        .catch(() => document.getElementById('textPreview{{version}}').textContent = 'Błąd ładowania pliku. {{{url}}}');
    </script>

  {{!-- Nieobsługiwane --}}
  {{else}}
    <p>❌ Ten format pliku ({{contentType}}) nie jest obsługiwany w podglądzie.</p>
  {{/if}} 
</div>